<main class="container">
  <h1>Define el orden de las tareas</h1>

  <section class="card">
    <div class="muted">Objetivo</div>
    <div class="goal" id="goal-text"></div>
  </section>

  <section class="card">
    <div class="graph-header">
      <h2 style="margin:0">Dependencias entre tareas</h2>
      <button id="back-btn" type="button" class="secondary">Volver</button>
    </div>

    <div class="two-col">
      <div>
        <div id="cy" class="cy-container"></div>
      </div>

      <div class="qa">
        <h3 style="margin-top:0">Define las dependencias</h3>
        <p class="muted">
          Para cada pareja de tareas, indica si una depende de la otra.
        </p>

        <div class="qa-card">
          <div class="muted">Progreso</div>
          <div class="progress-container">
            <div class="progress-bar">
              <div id="progress-fill" class="progress-fill"></div>
            </div>
            <div id="progress-text" class="progress-text"></div>
          </div>

          <div id="question" class="question"></div>

          <div class="actions-col">
            <button id="a-dep-b" type="button"></button>
            <button id="b-dep-a" type="button"></button>
            <button id="none" type="button" class="secondary">Son independientes</button>
          </div>

          <div class="qa-navigation">
            <button id="prev-question" type="button" class="secondary">← Anterior</button>
            <span id="question-counter" class="muted small"></span>
            <button id="next-question" type="button" class="secondary">Siguiente →</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="card">
    <div class="graph-header">
      <h2 style="margin:0">Tu plan</h2>

      <div class="plan-controls">
        <div class="plan-select">
          <span class="plan-select__label muted small">Modo</span>
          <select id="plan-mode" class="plan-select__control" aria-label="Modo de plan">
            <option value="waves">Paralelo (olas)</option>
            <option value="linear" selected>Secuencia (una tras otra)</option>
          </select>
        </div>

        <button id="gen-plan" type="button">Generar plan</button>
      </div>
    </div>

    <p class="muted" style="margin-top:8px">
      En <strong>Secuencia</strong>, si hay varias tareas posibles a la vez, se prioriza la que desbloquea más tareas.
    </p>

    <div id="cycle-warning" class="cycle-warning" style="display:none">
      <div class="cycle-warning-header">
        <span class="cycle-warning-icon">⚠️</span>
        <strong>Dependencia circular detectada</strong>
      </div>
      <p class="cycle-warning-text" id="cycle-warning-text"></p>
      <div id="cycle-items" class="cycle-items"></div>
      <div class="cycle-warning-actions">
        <button id="review-cycle" type="button" class="secondary">Revisar dependencias</button>
      </div>
    </div>

    <div id="planCy" class="cy-plan"></div>
    <div id="plan-msg" class="muted small" style="margin-top:10px">Aún no has generado el plan.</div>
  </section>
</main>
